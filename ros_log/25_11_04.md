# 2025-11-04

## 1. 模型文件问题

加载aubo_i5.xacro文件到参数服务器中，但是一直报错：

```bash
RLException: Invalid <param> tag: Cannot load command parameter [robot_description]: command [['/opt/ros/melodic/lib/xacro/xacro', '--inorder', '/home/fy/aubo_new/src/aubo_robot/aubo_description/urdf/aubo_i5.xacro']] returned with code [2]. 

Param xml is <param command="$(arg model)" name="robot_description"/>
The traceback for the exception was written to the log file
```

从错误信息和 launch 文件来看，核心问题是xacro 文件解析失败（返回代码 2），导致robot_description参数无法加载。
错误的根源是执行 xacro 命令时出错，先直接在终端运行 xacro 命令，查看具体错误信息：

```bash
/opt/ros/melodic/lib/xacro/xacro --inorder /home/fy/aubo_new/src/aubo_robot/aubo_description/urdf/aubo_i5.xacro
```

运行后，发现以下的错误信息：

```bash
xacro: in-order processing became default in ROS Melodic. You can drop the option.
XML parsing error: not well-formed (invalid token): line 9, column 2
when processing file: /home/fy/aubo_new/src/aubo_robot/aubo_description/urdf/jiazhua.urdf
```

可见是在jiazhua.urdf文件的第9行，第2列出现了错误的token。
那么我们进入jiazhua.urdf文件，查看第9行，第2列的token：

```XML
  <link name="gripper_point />
  <joint name="world_joint" type="fixed">
    <parent link="ee_base_link" />
    <child link ="gripper_point" />
    <origin xyz="0.0 0.0 0.20" rpy="0.0 0.0 0.0" />
  </joint>
```

这里我们是想定义一个夹爪末端的点，用于作为抓取的参考坐标点，所以这个点要求没有碰撞体，只能是一个点。在此我们有两个错误：

1. 缺少关闭标签（gripper_point左右引号）
2. 缺少关节名称(world_joint)重名

这连个错误都是从aubo_i5.xacro文件中copy过来的，所以copy一定需要谨慎。
修改后的代码为：

```XML
  <link name="gripper_point" />
  <joint name="gripper_point_joint" type="fixed">
    <parent link="ee_base_link" />
    <child link ="gripper_point" />
    <origin xyz="0.0 0.0 0.20" rpy="0.0 0.0 0.0" />
  </joint>
```

保存后，再次运行xacro命令，发现没有错误信息了，说明问题解决。
